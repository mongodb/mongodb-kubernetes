{
  "packages": {
    "go":                          "latest",
    "gopls":                       "latest",
    "gotools":                     "latest",
    "git":                         "latest",
    "neovim":                      "latest",
    "docker":                      "latest",
    "kubectl":                     "latest",
    "ripgrep":                     "latest",
    "python3":                     "latest",
    "awscli2":                     "latest",
    "kustomize":                   "latest",
    "kubernetes-controller-tools": "latest",
    "python3Packages.pip":         "",
    "shellcheck":                  "latest",
    "go-licenses":                 "1.6.0"
  },
  "env": {
    "AWS_PROFILE": "mck",
    "AWS_REGION":  "eu-west-1"
  },
  "shell": {
    "init_hook": [
      "# Prepend Go's managed GOROOT to PATH",
      "# This allows Go's toolbox version control overiding Nix's paths",
      "export NIX_GOROOT=$(go env GOROOT)",
      "export PATH=$NIX_GOROOT/bin:$PATH",
      "unset GOROOT            # force to calculate GOROOT automatically",
      "export GOTOOLCHAIN=auto # honor go.mod's toolchain",
      "go version",
      "echo \"☁️  Active AWS Profile: ${AWS_PROFILE}\"",
      "alias aws-login=\"aws sso login --profile ${AWS_PROFILE}\"",
      "aws sts get-caller-identity --no-cli-pager",
      "export SSH_AUTH_SOCK=$(gpgconf --list-dirs agent-ssh-socket)"
    ]
  }
}
