---
apiVersion: mongodb.com/v1
kind: MongoDB
metadata:
  name: my-replica-set-scram-sha-1
spec:
  members: 3
  version: 5.0.5
  type: ReplicaSet
  opsManager:
    configMapRef:
      name: my-project
  credentials: my-credentials
  logLevel: DEBUG
  persistent: false
  security:
    authentication:
      agents:
        # SCRAM-SHA-1 is deprecated and requires MONGODB-CR for legacy support when used in Agent Mode.    
        # Without this configuration, OpsManager will produce the following error:    
        # "Cannot configure SCRAM-SHA-1 without using MONGODB-CR in the Agent Mode"   
        mode: MONGODB-CR
      enabled: true
      modes: ["SCRAM-SHA-1", "MONGODB-CR"]
