{{ $ns :=  include "mongodb-kubernetes-operator.namespace" .  -}}
{{- if not (lookup "v1" "ConfigMap" $ns "mongodb-kubernetes-operator-member-list") }}
{{- if .Values.multiCluster.clusters }}
---
apiVersion: v1
kind: ConfigMap
data:
  {{- range .Values.multiCluster.clusters }}
  {{ . }}: ""
  {{- end }}
metadata:
  namespace: {{$ns}}
  name: mongodb-kubernetes-operator-member-list
  labels:
    multi-cluster: "true"
{{- end }}
{{- end }}
