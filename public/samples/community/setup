cat <<EOF | kubectl apply -f -  
apiVersion: v1
kind: ConfigMap
metadata:
  name: my-project-replication
  namespace: mongodb-test
data:
  baseUrl: https://cloud-qa.mongodb.com
  orgId: 68ed17afe92f2e07a21136c9
  projectName: my-project-replication
EOF

cat <<EOF | kubectl apply -f -  
apiVersion: v1
kind: Secret
metadata:
  name: organization-secret
  namespace:  mongodb-test
stringData:
  user: vlnkxxhl
  publicApiKey: a0672035-b459-4b4b-b1ee-00c2a23866e5
EOF

cat <<EOF | kubectl apply -f -  
apiVersion: mongodb.com/v1
kind: MongoDB
metadata:
  name: my-replica-set
  namespace:  mongodb-test
spec:
  members: 3
  version: "8.0.0"
  cloudManager:
    configMapRef:
      name: my-project-replication
  credentials: organization-secret
  type: ReplicaSet
  persistent: true
EOF

cat <<EOF | kubectl apply -f -
apiVersion: v1
kind: ConfigMap
metadata:
  name: my-project
  namespace: mongodb
data:
  baseUrl: http://ops.om.internal:8080
  orgId: 68ee5e6823d07074069458e2
EOF

cat <<EOF | kubectl apply -f -
apiVersion: v1
kind: Secret
metadata:
  name: organization-secret
  namespace: mongodb
stringData:
  publicKey: eoxhstus
  privateKey: 7ff2eb4d-0f35-43ff-b5a6-5d0ac6dbd4ad
EOF

cat <<EOF | kubectl apply -f -  
apiVersion: mongodb.com/v1
kind: MongoDB
metadata:
  name: my-replica-set
  namespace: mongodb
spec:
  members: 3
  version: "8.0.0"
  OpsManager:
    configMapRef:
      name: my-project
  credentials: organization-secret
  type: ReplicaSet
  persistent: true
EOF

cat <<EOF | kubectl apply -f -  
apiVersion: v1
stringData:
  FirstName: Jane
  LastName: Doe 
  Password: Passw0rd. 
  Username: admin
kind: Secret
metadata:
  name: ops-manager-admin-secret
type: Opaque
---
apiVersion: mongodb.com/v1
kind: MongoDBOpsManager
metadata:
  name: om2
spec:
  replicas: 1
  version: 8.0.5
  adminCredentials: ops-manager-admin-secret
  backup:
    enabled: false
  applicationDatabase:
    members: 3
    version: 8.0.8-ent

  configuration:
    mms.ignoreInitialUiSetup: "true"
    mms.adminEmailAddr: support@example.com
    mms.fromEmailAddr: support@example.com
    mms.replyToEmailAddr: support@example.com
    mms.mail.hostname: email-smtp.us-east-1.amazonaws.com
    mms.mail.port: "465"
    mms.mail.ssl: "true"
    mms.mail.transport: smtp
    mms.minimumTLSVersion: TLSv1.2
EOF












cat <<EOF | kubectl apply -f -  
apiVersion: v1
kind: ConfigMap
metadata:
  name: my-project-replication-fourth
  namespace: mongodb-test
data:
  baseUrl: https://cloud-qa.mongodb.com
  orgId: 68ed17afe92f2e07a21136c9
  projectName: my-project-replication-fourth
EOF


cat <<EOF | kubectl apply -f -  
apiVersion: mongodb.com/v1
kind: MongoDB
metadata:
  name: my-replica-set-third
  namespace:  mongodb-test
spec:
  members: 3
  version: 5.0.15
  type: ReplicaSet
  opsManager:
    configMapRef:
      name: my-project-replication-fourth
  credentials: my-credentials
  logLevel: DEBUG
  persistent: true
EOF






cat <<EOF | kubectl apply -f -  
apiVersion: v1
kind: ConfigMap
metadata:
  name: my-replica-set-auth-changed
  namespace: mongodb-test
data:
  baseUrl: https://cloud-qa.mongodb.com
  orgId: 68ed17afe92f2e07a21136c9
  projectName: my-replica-set-auth-changed
EOF


cat <<EOF | kubectl apply -f -  
apiVersion: mongodb.com/v1
kind: MongoDB
metadata:
  name: my-replica-set
spec:
  members: 3
  version: 6.0.5
  type: ReplicaSet
  opsManager:
    configMapRef:
      name: my-replica-set-auth-changed
  credentials: my-credentials
  logLevel: DEBUG
  persistent: false
  security:
    authentication:
      enabled: true
      modes: ["SCRAM"]
EOF



cat <<EOF | kubectl apply -f -  
apiVersion: v1
kind: ConfigMap
metadata:
  name: wed-29-moved-9
  namespace: mongodb-test
data:
  baseUrl: https://cloud-qa.mongodb.com
  orgId: 68ed17afe92f2e07a21136c9
  projectName: wed-29-moved-9
EOF

cat <<EOF | kubectl apply -f -  
apiVersion: mongodb.com/v1
kind: MongoDB
metadata:
  name: sharded-cluster-scram-sha-256
spec:
  shardCount: 1
  mongodsPerShardCount: 1
  mongosCount: 1
  configServerCount: 1
  version: 6.0.5
  type: ShardedCluster
  opsManager:
    configMapRef:
      name: wed-29-moved-9
  credentials: my-credentials
  persistent: true
  security:
    authentication:
      enabled: true
      modes: ["SCRAM"]
EOF


